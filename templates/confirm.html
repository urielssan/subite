{% extends "base.html" %}
{% block content %}
<div class="card card-60">
  <div class="receipt-header">
    <h1> Boleta de Reserva</h1>
    <p>{{ category }}</p>
  </div>
  
  <div class="grid-confirm">
    {% for k, v in details.items() %}
      <div class="detail">
        <strong>{{ k }}</strong>
        <span>{{ v }}</span>
      </div>
    {% endfor %}
  </div>
  
  <div class="receipt-total">
    <h1>Total: ${{ '%.0f'|format(total) }}</h1>
  </div>

  {# Construir mensaje para WhatsApp manteniendo el contenido mostrado #}
  {% set _lines = [] %}
  {% for k,v in details.items() %}
    {% set _ = _lines.append(k ~ ': ' ~ v) %}
  {% endfor %}
  {% set _message = ('Confirmación - ' ~ (category or 'Reserva') ~ '\n' ~ (_lines|join('\n')) ~ '\nTotal: $' ~ ('%.0f'|format(total))) %}

  <div class="button-wrapper" style="margin-top:24px; justify-content:center;">
    <!-- Botón WhatsApp estilizado; abre chat con mensaje prearmado -->
    <a class="btn whatsapp" href="https://wa.me/5493585130505?text={{ _message|urlencode }}" target="_blank" rel="noopener noreferrer" aria-label="Continuar por WhatsApp">
     <button>Confirmar por WhatsApp</button>
    </a>

    <!-- Volver al inicio -->
    <a href="{{ url_for('index') }}"><button class="btn outline">Volver al inicio</button></a>
  </div>
</div>

<script>

</script>
{% endblock %}
