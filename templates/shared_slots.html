{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Horarios disponibles — {{ 'Río Cuarto → Córdoba' if route=='RC-CBA' else 'Córdoba → Río Cuarto' }} — {{ on_date }}</h2>
  <table class="table">
    <thead><tr><th>Hora</th><th>Cupo libre</th><th>Estado</th><th></th></tr></thead>
    <tbody>
      {% for s, free, ok in availability %}
      <tr>
        <td>{{ s.time }}</td>
        <td>{{ free }}/{{ s.capacity }}</td>
        <td>{% if ok %}<span class="badge">Disponible</span>{% else %}<span class="badge">Agotado</span>{% endif %}</td>
        <td>
          {% if ok %}
            <a href="{{ url_for('shared_book', schedule_id=s.id) }}?p={{ passengers }}"><button>Reservar</button></a>
          {% else %}
            <button class="secondary" disabled>Sin cupo</button>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <a href="{{ url_for('shared') }}"><button class="secondary">Volver</button></a>
</div>
{% endblock %}
